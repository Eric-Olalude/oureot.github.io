<!-- udacity2.0 -->
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Create a Transaction: Step 3</title>
  <link rel="stylesheet" href="../assets/css/bootstrap.min.css">
  <link rel="stylesheet" href="../assets/css/plyr.css">
  <link rel="stylesheet" href="../assets/css/katex.min.css">
  <link rel="stylesheet" href="../assets/css/jquery.mCustomScrollbar.min.css">
  <link rel="stylesheet" href="../assets/css/styles.css">
  <link rel="shortcut icon" type="image/png" href="../assets/img/udacimak.png" />
</head>

<body>
  <div class="wrapper">
    <nav id="sidebar">
  <div class="sidebar-header">
    <h3>Blockchain Data</h3>
  </div>

  <ul class="sidebar-list list-unstyled CTAs">
    <li>
      <a href="../index.html" class="article">Back to Home</a>
    </li>
  </ul>

  <ul class="sidebar-list list-unstyled components">
    <li class="">
      <a href="01. Lesson Overview.html">01. Lesson Overview</a>
    </li>
    <li class="">
      <a href="02. Blockchain Data Motivation.html">02. Blockchain Data Motivation</a>
    </li>
    <li class="">
      <a href="03. Blockchain Data Models Overview.html">03. Blockchain Data Models Overview</a>
    </li>
    <li class="">
      <a href="04. Transactions  - Inputs and Outputs.html">04. Transactions  - Inputs and Outputs</a>
    </li>
    <li class="">
      <a href="05. Transaction Data Models.html">05. Transaction Data Models</a>
    </li>
    <li class="">
      <a href="06. Bitcoin Scripts.html">06. Bitcoin Scripts</a>
    </li>
    <li class="">
      <a href="07. Script Opcodes.html">07. Script Opcodes</a>
    </li>
    <li class="">
      <a href="08. Opcodes.html">08. Opcodes</a>
    </li>
    <li class="">
      <a href="09. Attributes of Script.html">09. Attributes of Script</a>
    </li>
    <li class="">
      <a href="10. Raw Transaction Review.html">10. Raw Transaction Review</a>
    </li>
    <li class="">
      <a href="11. Create Raw Transaction Motivation.html">11. Create Raw Transaction Motivation</a>
    </li>
    <li class="">
      <a href="12. Setup for Creating a Transaction.html">12. Setup for Creating a Transaction</a>
    </li>
    <li class="">
      <a href="13. Create a Transaction Step 1.html">13. Create a Transaction: Step 1</a>
    </li>
    <li class="">
      <a href="14. Create a Transaction Step 2.html">14. Create a Transaction: Step 2</a>
    </li>
    <li class="">
      <a href="15. Create a Transaction Step 3.html">15. Create a Transaction: Step 3</a>
    </li>
    <li class="">
      <a href="16. Create a Transaction Step 4.html">16. Create a Transaction: Step 4</a>
    </li>
    <li class="">
      <a href="17. Create a Transaction Step 5.html">17. Create a Transaction: Step 5</a>
    </li>
    <li class="">
      <a href="18. Create a Transaction Step 6.html">18. Create a Transaction: Step 6</a>
    </li>
    <li class="">
      <a href="19. Create a Transaction Step 7.html">19. Create a Transaction: Step 7</a>
    </li>
    <li class="">
      <a href="20. Embedding Data in Transactions.html">20. Embedding Data in Transactions</a>
    </li>
    <li class="">
      <a href="21. Embedding Data in Bitcoin Core.html">21. Embedding Data in Bitcoin Core</a>
    </li>
    <li class="">
      <a href="22. Ethics of Embedding Data.html">22. Ethics of Embedding Data</a>
    </li>
    <li class="">
      <a href="23. Lesson Summary and Project Prep Overview.html">23. Lesson Summary and Project Prep Overview</a>
    </li>
  </ul>

  <ul class="sidebar-list list-unstyled CTAs">
    <li>
      <a href="../index.html" class="article">Back to Home</a>
    </li>
  </ul>
</nav>

    <div id="content">
      <header class="container-fluild header">
        <div class="container">
          <div class="row">
            <div class="col-12">
              <div class="align-items-middle">
                <button type="button" id="sidebarCollapse" class="btn btn-toggle-sidebar">
                  <div></div>
                  <div></div>
                  <div></div>
                </button>

                <h1 style="display: inline-block">15. Create a Transaction: Step 3</h1>
              </div>
            </div>
          </div>
        </div>
      </header>

      <main class="container">
        <div class="row">
          <div class="col-12">
            <div class="ud-atom">
  <h3></h3>
  <div>
  <h2 id="step-3-create-raw-transaction">Step 3. Create Raw Transaction</h2>
<p>Now, that we have UTXOs, let's create a transaction. In this step, we are only creating a transaction. We are not yet sending it to the network.</p>
</div>

</div>
<div class="divider"></div><div class="ud-atom">
  <h3><p>C2L4 Step 3 V2</p></h3>
  <video controls>
  <source src="15. C2L4 Step 3 V2-eREityQyyEk.mp4" type="video/mp4">

  <track default="true" kind="subtitles" srclang="en" src="15. C2L4 Step 3 V2-eREityQyyEk.en.vtt" label="en">
</video>


</div>
<div class="divider"></div><div class="ud-atom">
  <h3></h3>
  <div>
  <h3 id="explanation">Explanation</h3>
<p>Let's say we have a UTXO of 0.050 BTC in "from_address", and we want to send 0.030 BTC to a receiving address called "to_address".</p>
<p>Hence we will have 2 transactions here.</p>
<ul>
<li><p>The first transaction will transfer 0.030 BTC to "to_address".</p></li>
<li><p>The second transaction will send the balance back to our "from_address".</p></li>
</ul>
<p>Let's also assume that our transaction fee would cost us 0.0005 BTC. In this case, our balance back to the "from_address" would be (0.050 - 0.030) - 0.0005 = 0.0195</p>
<p><em>To summarize:</em></p>
<p>Sum(Inputs) - Sum(Outputs) = Transaction Fee</p>
<p>(0.050 BTC) - (0.030 BTC + 0.0195 BTC) = 0.0005 BTC</p>
<h3 id="command">Command</h3>
<p>We will use the <a href="http://chainquery.com/bitcoin-api/createrawtransaction" rel="noopener noreferrer" target="_blank">createrawtransaction command</a>:</p>
<p><strong>Command Parameters:</strong></p>
<pre><code>createrawtransaction '[{"txid":"TXID","vout": VOUT}]’’{“to_address”:amount1, “from_address”:amount2}’</code></pre>
<h3 id="build-out-command">Build Out Command</h3>
<p><strong>txid:</strong> e787a27bda32c8b54ee501be46d2cfcd47c1566c8ef6ee339bdb7cd5c82b701c</p>
<p><strong>vout:</strong> 0</p>
<p><strong>to_address:</strong> 2NFK8YHKT6hPPTDKTPP3c5bx7oPGrYhzj2y</p>
<p><strong>from_address:</strong> 2Mzxx8wGAmQQyCCrb2vXP4yxaYY9s9nepfy</p>
<p><strong>amount1:</strong> .030 BTC being sent to "to_address"</p>
<p><strong>amount2:</strong> 0.0195 BTC being sent back to the "from_address"</p>
<h3 id="execute-command">Execute Command</h3>
<pre><code>createrawtransaction '[{"txid": "e787a27bda32c8b54ee501be46d2cfcd47c1566c8ef6ee339bdb7cd5c82b701c", "vout":0}]' '{"2NFK8YHKT6hPPTDKTPP3c5bx7oPGrYhzj2y":0.030, "2Mzxx8wGAmQQyCCrb2vXP4yxaYY9s9nepfy":0.0195}'</code></pre>
</div>

</div>
<div class="divider"></div><div class="ud-atom">
  <h3></h3>
  <div>
  <p>Note: As mentioned above, this example has two outputs. The first is to send 0.030 BTC to the receiving address. The second is to send 0.0195 BTC as change back to the original address.</p>
<h3 id="result--hex-string">Result  (hex string)</h3>
<pre><code>02000000011c702bc8d57cdb9b33eef68e6c56c147cdcfd246be01e54eb5c832da7ba287e70000000000ffffffff02c0c62d000000000017a914f20fe211102535e3c37bb0e659099387ddc035b58730c11d000000000017a91454ad1e8953876c90d3fc15798c687835ab3d3aee8700000000</code></pre>
</div>

</div>
<div class="divider"></div>
          </div>

          <div class="col-12">
            <p class="text-right">
              <a href="16. Create a Transaction Step 4.html" class="btn btn-outline-primary mt-4" role="button">Next Concept</a>
            </p>
          </div>
        </div>
      </main>

      <footer class="footer">
        <div class="container">
          <div class="row">
            <div class="col-12">
              <p class="text-center">
                <a href="https://us-udacity.github.io/" target="_blank">【udacity2.0 】If you need more courses, please add wechat：udacity6</a>
              </p>
            </div>
          </div>
        </div>
      </footer>
    </div>
  </div>


  <script src="../assets/js/jquery-3.3.1.min.js"></script>
  <script src="../assets/js/plyr.polyfilled.min.js"></script>
  <script src="../assets/js/bootstrap.min.js"></script>
  <script src="../assets/js/jquery.mCustomScrollbar.concat.min.js"></script>
  <script src="../assets/js/katex.min.js"></script>
  <script>
    // Initialize Plyr video players
    const players = Array.from(document.querySelectorAll('video')).map(p => new Plyr(p));

    // render math equations
    let elMath = document.getElementsByClassName('mathquill');
    for (let i = 0, len = elMath.length; i < len; i += 1) {
      const el = elMath[i];

      katex.render(el.textContent, el, {
        throwOnError: false
      });
    }

    // this hack will make sure Bootstrap tabs work when using Handlebars
    if ($('#question-tabs').length && $('#user-answer-tabs').length) {
      $("#question-tabs a.nav-link").on('click', function () {
        $("#question-tab-contents .tab-pane").hide();
        $($(this).attr("href")).show();
      });
      $("#user-answer-tabs a.nav-link").on('click', function () {
        $("#user-answer-tab-contents .tab-pane").hide();
        $($(this).attr("href")).show();
      });
    } else {
      $("a.nav-link").on('click', function () {
        $(".tab-pane").hide();
        $($(this).attr("href")).show();
      });
    }

    // side bar events
    $(document).ready(function () {
      $("#sidebar").mCustomScrollbar({
        theme: "minimal"
      });

      $('#sidebarCollapse').on('click', function () {
        $('#sidebar, #content').toggleClass('active');
        $('.collapse.in').toggleClass('in');
        $('a[aria-expanded=true]').attr('aria-expanded', 'false');
      });

      // scroll to first video on page loading
      if ($('video').length) {
        $('html,body').animate({ scrollTop: $('div.plyr').prev().offset().top});
      }

      // auto play first video: this may not work with chrome/safari due to autoplay policy
      if (players && players.length > 0) {
        players[0].play();
      }

      // scroll sidebar to current concept
      const currentInSideBar = $( "ul.sidebar-list.components li a:contains('15. Create a Transaction: Step 3')" )
      currentInSideBar.css( "text-decoration", "underline" );
      $("#sidebar").mCustomScrollbar('scrollTo', currentInSideBar);
    });
  </script>
</body>

</html>
