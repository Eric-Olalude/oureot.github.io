<!-- udacity2.0 -->
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Ethereum Secret Messenger</title>
  <link rel="stylesheet" href="../assets/css/bootstrap.min.css">
  <link rel="stylesheet" href="../assets/css/plyr.css">
  <link rel="stylesheet" href="../assets/css/katex.min.css">
  <link rel="stylesheet" href="../assets/css/jquery.mCustomScrollbar.min.css">
  <link rel="stylesheet" href="../assets/css/styles.css">
  <link rel="shortcut icon" type="image/png" href="../assets/img/udacimak.png" />
</head>

<body>
  <div class="wrapper">
    <nav id="sidebar">
  <div class="sidebar-header">
    <h3> Ethereum Fundamentals and Development Tools</h3>
  </div>

  <ul class="sidebar-list list-unstyled CTAs">
    <li>
      <a href="../index.html" class="article">Back to Home</a>
    </li>
  </ul>

  <ul class="sidebar-list list-unstyled components">
    <li class="">
      <a href="01. Lesson Introduction.html">01. Lesson Introduction</a>
    </li>
    <li class="">
      <a href="02. Ethereum Basics.html">02. Ethereum Basics</a>
    </li>
    <li class="">
      <a href="03. What makes Ethereum Special.html">03. What makes Ethereum Special?</a>
    </li>
    <li class="">
      <a href="04. Ethereum Tools and Community.html">04. Ethereum Tools and Community</a>
    </li>
    <li class="">
      <a href="05. Introduction to DApps.html">05. Introduction to DApps</a>
    </li>
    <li class="">
      <a href="06. Scan the Ethereum Network.html">06. Scan the Ethereum Network</a>
    </li>
    <li class="">
      <a href="07. Deploy to the Test Network.html">07. Deploy to the Test Network</a>
    </li>
    <li class="">
      <a href="08. Prepare to Connect to the Network.html">08. Prepare to Connect to the Network</a>
    </li>
    <li class="">
      <a href="09. Connect to the Ethereum Network.html">09. Connect to the Ethereum Network</a>
    </li>
    <li class="">
      <a href="10. Investigate Ethereum Accounts.html">10. Investigate Ethereum Accounts</a>
    </li>
    <li class="">
      <a href="11. Create a Local Blockchain.html">11. Create a Local Blockchain</a>
    </li>
    <li class="">
      <a href="12. Connect to Your Local Ethereum Blockchains.html">12. Connect to Your Local Ethereum Blockchains</a>
    </li>
    <li class="">
      <a href="13. Create Ethereum Transactions .html">13. Create Ethereum Transactions </a>
    </li>
    <li class="">
      <a href="14. Ethereum Gas and Fees.html">14. Ethereum Gas and Fees</a>
    </li>
    <li class="">
      <a href="15. Explore Ethereum Metrics.html">15. Explore Ethereum Metrics</a>
    </li>
    <li class="">
      <a href="16. First Dapp Revisited.html">16. First Dapp Revisited</a>
    </li>
    <li class="">
      <a href="17. Ethereum Secret Messenger.html">17. Ethereum Secret Messenger</a>
    </li>
    <li class="">
      <a href="18. Improved Deployment Process.html">18. Improved Deployment Process</a>
    </li>
    <li class="">
      <a href="19. DApps Next Steps.html">19. DApps Next Steps</a>
    </li>
    <li class="">
      <a href="20. Optional Full Ethereum Nodes.html">20. Optional: Full Ethereum Nodes</a>
    </li>
    <li class="">
      <a href="21. Lesson Recap.html">21. Lesson Recap</a>
    </li>
  </ul>

  <ul class="sidebar-list list-unstyled CTAs">
    <li>
      <a href="../index.html" class="article">Back to Home</a>
    </li>
  </ul>
</nav>

    <div id="content">
      <header class="container-fluild header">
        <div class="container">
          <div class="row">
            <div class="col-12">
              <div class="align-items-middle">
                <button type="button" id="sidebarCollapse" class="btn btn-toggle-sidebar">
                  <div></div>
                  <div></div>
                  <div></div>
                </button>

                <h1 style="display: inline-block">17. Ethereum Secret Messenger</h1>
              </div>
            </div>
          </div>
        </div>
      </header>

      <main class="container">
        <div class="row">
          <div class="col-12">
            <div class="ud-atom">
  <h3></h3>
  <div>
  <h1 id="ethereum-secret-messenger">Ethereum Secret Messenger</h1>
<hr />
<p>Here you'll work towards setting up your blockchain to connect with a front end application. You'll start by using an HTML file, then switch to serving this live on our local host. </p>
<p>From there, I'll help you address some issues that come up and point out things to consider when building your own applications. Finally, you'll wire everything up correctly and have a live decentralized application.</p>
<h2 id="objectives">Objectives</h2>
<hr />
<p><em>Our goal is to help you do the following things.</em></p>
<ol>
<li>Connect the functions of your blockchain to a front end that users can interact with.</li>
<li>Fix some of the issues that come up needed to make this DApp live.</li>
<li>Deploy your DApp to the test network and view the results</li>
</ol>
</div>

</div>
<div class="divider"></div><div class="ud-atom">
  <h3></h3>
  <div>
  <h2 id="connect-a-front-end">Connect a Front End</h2>
<hr />
</div>

</div>
<div class="divider"></div><div class="ud-atom">
  <h3><p>17-Ethereum-Secret-Messenger</p></h3>
  <video controls>
  <source src="17. 17-Ethereum-Secret-Messenger-GzzuVd4jIeQ.mp4" type="video/mp4">

  <track default="true" kind="subtitles" srclang="en" src="17. 17-Ethereum-Secret-Messenger-GzzuVd4jIeQ.en.vtt" label="en">
</video>


</div>
<div class="divider"></div><div class="ud-atom">
  <h3></h3>
  <div>
  <h3 id="indexhtml">Index.html</h3>
<hr />
<p>Here is the <strong>index.html</strong> file as shown in the video above.</p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;

&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
    &lt;meta http-equiv="X-UA-Compatible" content="ie=edge"&gt;
    &lt;title&gt;Deploy a Remix Contract&lt;/title&gt;

    &lt;link rel="stylesheet" type="text/css" href="main.css"&gt;

    &lt;script src="https://cdn.jsdelivr.net/gh/ethereum/web3.js/dist/web3.min.js"&gt;&lt;/script&gt;
&lt;/head&gt;

&lt;body&gt;
    &lt;div&gt;
        &lt;h1&gt;Ethereum Secret Messenger&lt;/h1&gt;
        &lt;hr&gt;

        &lt;label for="message"&gt;This site writes a secret message to the Ethereum
            blockchain!&lt;/label&gt;
        &lt;input id="userInput" type="text"&gt;

        &lt;button id="setMessageButton"&gt;Set secret message&lt;/button&gt;
    &lt;/div&gt;

    &lt;script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"&gt;&lt;/script&gt;

    &lt;script&gt;

        // Connect a the web3 provider
        if (typeof web3 !== 'undefined') {
            web3 = new Web3(web3.currentProvider);
        } else {
            web3 = new Web3(new Web3.providers.HttpProvider("http://localhost:7545"));
        }

        // Set a default account
        web3.eth.defaultAccount = web3.eth.accounts[0];

        // Get the contract address
        var RemixContract = web3.eth.contract(CONTRACT-ABI-HERE);

        // Get the contract abi
        var myMessage = RemixContract.at('CONTRACT ADDRESS HERE');

        console.log(myMessage);

        $("#setMessageButton").click(function () {
            myMessage.setMessage($("#userInput").val());
            console.log($("#userInput").val())
        });

    &lt;/script&gt;
&lt;/body&gt;

&lt;/html&gt;</code></pre>
</div>

</div>
<div class="divider"></div><div class="ud-atom">
  <h3></h3>
  <div>
  <h3 id="maincss">main.css</h3>
<hr />
<p>Here is the <strong>main.css</strong> file as shown in the video above. </p>
<pre><code>body {
    background-color:#F0F0F0;
    padding: 2em;
    font-family: 'Raleway','Source Sans Pro', 'Arial';
}

label {
    display:block;
    margin-bottom:10px;
}
input {
    padding:10px;
    width: 50%;
    margin-bottom: 1em;
}

button {
    margin: 2em 0;
    padding: 1em 4em;
    display:block;
    background-color: #00BCD4 
}

#setMessageButton {
    padding:1em;
    background-color:#fff;
    margin: 1em 0;
    background-color: #00BCD4;
    color: #fff 
}</code></pre>
</div>

</div>
<div class="divider"></div><div class="ud-atom">
  <h3></h3>
  <div>
  <h2 id="2-first-try-at-a-live-server">2. First Try at a Live Server</h2>
<hr />
</div>

</div>
<div class="divider"></div><div class="ud-atom">
  <h3><ol start="2">
<li>First Try At A Live Server</li>
</ol></h3>
  <video controls>
  <source src="17. 2. First Try At A Live Server-AoBjcs4xXko.mp4" type="video/mp4">

  <track default="true" kind="subtitles" srclang="en" src="17. 2. First Try At A Live Server-AoBjcs4xXko.en.vtt" label="en">
</video>


</div>
<div class="divider"></div><div class="ud-atom">
  <h3></h3>
  <div>
  <h2 id="updates-to-indexhtml">Updates to index.html</h2>
<hr />
<p>Here is a summary of the changes made to <strong>index.html</strong> throughout the previous video</p>
<pre><code>$("#setMessageButton").click(function () {
    message = $("#userInput").val()
    myMessage.setMessage(message, (error, result) =&gt; {message = result});
    console.log($("#userInput").val())
});</code></pre>
</div>

</div>
<div class="divider"></div><div class="ud-atom">
  <h3></h3>
  <div>
  <h2 id="fix-the-errors-dapp-on-a-local-blockchain">Fix the Errors: DApp on a Local Blockchain</h2>
<hr />
</div>

</div>
<div class="divider"></div><div class="ud-atom">
  <h3><p>Fix The Errors DApp On A Local Blockchain</p></h3>
  <video controls>
  <source src="17. Fix The Errors DApp On A Local Blockchain-bQhCcJgf4-s.mp4" type="video/mp4">

  <track default="true" kind="subtitles" srclang="en" src="17. Fix The Errors DApp On A Local Blockchain-bQhCcJgf4-s.en.vtt" label="en">
</video>


</div>
<div class="divider"></div><div class="ud-atom">
  <h3></h3>
  <div>
  <h2 id="3-dapp-on-the-test-net">3. DApp on the Test Net</h2>
<hr />
</div>

</div>
<div class="divider"></div><div class="ud-atom">
  <h3><ol start="3">
<li>DApp On The Test Net</li>
</ol></h3>
  <video controls>
  <source src="17. 3. DApp On The Test Net-mZlbtW_HmDA.mp4" type="video/mp4">

  <track default="true" kind="subtitles" srclang="en" src="17. 3. DApp On The Test Net-mZlbtW_HmDA.en.vtt" label="en">
</video>


</div>
<div class="divider"></div><div class="ud-atom">
  <h3></h3>
  <div>
  <p>To get your DApp on the Ethereum Test Network will take a bit of re-organizing and the ability to adjust a few connections with tools that you already know. Throughout this section, we'll get you set up with the test network using the following tools</p>
<ul>
<li>Node.js</li>
<li>Web3</li>
<li>Remix</li>
<li>Infura</li>
</ul>
<p>You won't need ganache to connect to the test network. If you'd like to follow along, you can close ganache for now. </p>
</div>

</div>
<div class="divider"></div><div class="ud-atom">
  <h3></h3>
  <div>
  <div>
    <h4>Task Description:</h4>
    <p>You can use this checklist to keep track of your progress on the steps listed below.</p>
  </div>

  <form>
    <fieldset>
      <legend>Task List:</legend>

      <div>
        <input type="checkbox" id="f864973f-d49e-4fc1-a03e-bcf120746f9d--0">
        <label for="f864973f-d49e-4fc1-a03e-bcf120746f9d--0"><p><strong>Step 1:</strong> Connect to Infura</p></label>
      </div>
      <div>
        <input type="checkbox" id="f864973f-d49e-4fc1-a03e-bcf120746f9d--1">
        <label for="f864973f-d49e-4fc1-a03e-bcf120746f9d--1"><p><strong>Step 2:</strong> Connect Metamask to the Test Network</p></label>
      </div>
      <div>
        <input type="checkbox" id="f864973f-d49e-4fc1-a03e-bcf120746f9d--2">
        <label for="f864973f-d49e-4fc1-a03e-bcf120746f9d--2"><p><strong>Step 3:</strong> Deploy your Smart Contract to the Test Network</p></label>
      </div>
      <div>
        <input type="checkbox" id="f864973f-d49e-4fc1-a03e-bcf120746f9d--3">
        <label for="f864973f-d49e-4fc1-a03e-bcf120746f9d--3"><p><strong>Step 4:</strong> Update the Contract Address</p></label>
      </div>
      <div>
        <input type="checkbox" id="f864973f-d49e-4fc1-a03e-bcf120746f9d--4">
        <label for="f864973f-d49e-4fc1-a03e-bcf120746f9d--4"><p><strong>Step 5:</strong> Test the DApp</p></label>
      </div>
    </fieldset>
  </form>

  <div>
    <h4>Task Feedback:</h4>


    <p>Great job!</p>
  </div>
</div>


</div>
<div class="divider"></div><div class="ud-atom">
  <h3></h3>
  <div>
  <h4 id="step-1-connect-to-infura"><strong>Step 1:</strong> Connect to Infura</h4>
<hr />
<p>Navigate back to your <a href="https://infura.io/dashboard" rel="noopener noreferrer" target="_blank">Infura dashboard</a>, change the endpoint to configure to the Rinkeby Test Network, and copy the link they provide. This link will give web3 access to the Test Network. </p>
</div>

</div>
<div class="divider"></div><div class="ud-atom">
  <h3></h3>
  <div>
  <p>Next, go back to your code editor and replace the URL that connects you to ganache with this new endpoint url. </p>
<pre><code>web3 = new Web3(new Web3.providers.HttpProvider("https://rinkeby.infura.io/v3/YOUR-CONNECTION"));</code></pre>
<p>Your DApp is now set up to connect to the Test Network.</p>
</div>

</div>
<div class="divider"></div><div class="ud-atom">
  <h3></h3>
  <div>
  <h4 id="step-2-connect-metamask-to-the-test--network">Step 2: Connect Metamask to the Test  Network</h4>
<hr />
<p>Next, you'll need to connect Metamask to the test network. To do this, click on the extension icon, select the dropdown, and choose <strong>Rinkeby Test Network.</strong></p>
</div>

</div>
<div class="divider"></div><div class="ud-atom">
  <h3></h3>
  <div>
  <figure class="figure">
    <img src="img/screen-shot-2018-11-11-at-12.43.49-pm.png" alt="" class="img img-fluid">
    <figcaption class="figure-caption">
      
    </figcaption>
  </figure>
</div>


</div>
<div class="divider"></div><div class="ud-atom">
  <h3></h3>
  <div>
  <h4 id="step-3-deploy-your-smart-contract-to-the-test-network">Step 3: Deploy your Smart Contract to the Test Network</h4>
<hr />
<p>In this step, navigate back to remix to deploy your smart contract to the test network. First, check to ensure that the environment is connected to the injected web3 provider. This connects Remix to the web3 provider injected by Metamask which is giving you a connection to the test network. </p>
<p>Once it's connected, hit deploy to deploy this to the test network. You should see a notification come up confirming that you want to complete this transaction. Hit confirm and your contract will now wait to be confirmed by the network. </p>
<p>You can view this transaction on Etherscan by selecting the link provided in Remix or in Metamask.</p>
</div>

</div>
<div class="divider"></div><div class="ud-atom">
  <h3></h3>
  <div>
  <figure class="figure">
    <img src="img/screen-shot-2018-11-11-at-12.47.52-pm.png" alt="" class="img img-fluid">
    <figcaption class="figure-caption">
      
    </figcaption>
  </figure>
</div>


</div>
<div class="divider"></div><div class="ud-atom">
  <h3></h3>
  <div>
  <h4 id="step-4-update-the-contract-address">Step 4: Update the Contract Address</h4>
<hr />
<p>When you deployed this contract, you made a new contract address that needs to be updated in your code editor. To update your contract address, copy it from the deployed contract in Remix and paste it into your editor. </p>
<pre><code>var myMessage = RemixContract.at('YOUR NEW CONTRACT ADDRESS);</code></pre>
</div>

</div>
<div class="divider"></div><div class="ud-atom">
  <h3></h3>
  <div>
  <h4 id="step-5-test-the-dapp">Step 5: Test the DApp</h4>
<hr />
<p>Now that you've set up your connections, you're ready to test your DApp. Head back to your site, refresh the page, and try sending a secret message. When you do, Metamask should pop up asking you to confirm your transaction to send it to the test network. </p>
</div>

</div>
<div class="divider"></div><div class="ud-atom">
  <h3></h3>
  <div>
  <figure class="figure">
    <img src="img/screen-shot-2018-11-11-at-12.54.25-pm.png" alt="" class="img img-fluid">
    <figcaption class="figure-caption">
      
    </figcaption>
  </figure>
</div>


</div>
<div class="divider"></div><div class="ud-atom">
  <h3></h3>
  <div>
  <blockquote>
  <p><strong>Note:</strong> If you try this immediately after deploying your contract, you may get an error. In some cases, the Infura network needs time to sync your contract to their copy of the test network. This should probably not take more than 5-10 minutes.</p>
</blockquote>
<p>Once this transaction is confirmed you've officially deployed a DApp to the test network and made your first transaction.</p>
</div>

</div>
<div class="divider"></div><div class="ud-atom">
  <h3></h3>
  <div>
  <h2 id="review">Review</h2>
<hr />
</div>

</div>
<div class="divider"></div><div class="ud-atom">
  <h3><p>Skill Tracker</p></h3>
  <div>
  <div>
    <h4>Task Description:</h4>
    <p>Track the objectives you've feel you've gained the skills to complete.</p>
  </div>

  <form>
    <fieldset>
      <legend>Task List:</legend>

      <div>
        <input type="checkbox" id="60ea79a6-a4e9-4805-b204-3eb5d1bf5869--0">
        <label for="60ea79a6-a4e9-4805-b204-3eb5d1bf5869--0"><ol>
<li>Discuss the basics of how gas and fees work on the Ethereum network.</li>
</ol></label>
      </div>
      <div>
        <input type="checkbox" id="60ea79a6-a4e9-4805-b204-3eb5d1bf5869--1">
        <label for="60ea79a6-a4e9-4805-b204-3eb5d1bf5869--1"><ol start="2">
<li>Show the effects of gas cost and fees using an example transaction.</li>
</ol></label>
      </div>
    </fieldset>
  </form>

  <div>
    <h4>Task Feedback:</h4>


    <p>Congratulations on gaining new skills!</p>
  </div>
</div>


</div>
<div class="divider"></div>
          </div>

          <div class="col-12">
            <p class="text-right">
              <a href="18. Improved Deployment Process.html" class="btn btn-outline-primary mt-4" role="button">Next Concept</a>
            </p>
          </div>
        </div>
      </main>

      <footer class="footer">
        <div class="container">
          <div class="row">
            <div class="col-12">
              <p class="text-center">
                <a href="https://us-udacity.github.io/" target="_blank">【udacity2.0 】If you need more courses, please add wechat：udacity6</a>
              </p>
            </div>
          </div>
        </div>
      </footer>
    </div>
  </div>


  <script src="../assets/js/jquery-3.3.1.min.js"></script>
  <script src="../assets/js/plyr.polyfilled.min.js"></script>
  <script src="../assets/js/bootstrap.min.js"></script>
  <script src="../assets/js/jquery.mCustomScrollbar.concat.min.js"></script>
  <script src="../assets/js/katex.min.js"></script>
  <script>
    // Initialize Plyr video players
    const players = Array.from(document.querySelectorAll('video')).map(p => new Plyr(p));

    // render math equations
    let elMath = document.getElementsByClassName('mathquill');
    for (let i = 0, len = elMath.length; i < len; i += 1) {
      const el = elMath[i];

      katex.render(el.textContent, el, {
        throwOnError: false
      });
    }

    // this hack will make sure Bootstrap tabs work when using Handlebars
    if ($('#question-tabs').length && $('#user-answer-tabs').length) {
      $("#question-tabs a.nav-link").on('click', function () {
        $("#question-tab-contents .tab-pane").hide();
        $($(this).attr("href")).show();
      });
      $("#user-answer-tabs a.nav-link").on('click', function () {
        $("#user-answer-tab-contents .tab-pane").hide();
        $($(this).attr("href")).show();
      });
    } else {
      $("a.nav-link").on('click', function () {
        $(".tab-pane").hide();
        $($(this).attr("href")).show();
      });
    }

    // side bar events
    $(document).ready(function () {
      $("#sidebar").mCustomScrollbar({
        theme: "minimal"
      });

      $('#sidebarCollapse').on('click', function () {
        $('#sidebar, #content').toggleClass('active');
        $('.collapse.in').toggleClass('in');
        $('a[aria-expanded=true]').attr('aria-expanded', 'false');
      });

      // scroll to first video on page loading
      if ($('video').length) {
        $('html,body').animate({ scrollTop: $('div.plyr').prev().offset().top});
      }

      // auto play first video: this may not work with chrome/safari due to autoplay policy
      if (players && players.length > 0) {
        players[0].play();
      }

      // scroll sidebar to current concept
      const currentInSideBar = $( "ul.sidebar-list.components li a:contains('17. Ethereum Secret Messenger')" )
      currentInSideBar.css( "text-decoration", "underline" );
      $("#sidebar").mCustomScrollbar('scrollTo', currentInSideBar);
    });
  </script>
</body>

</html>
